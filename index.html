<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Sprite Tests</title>
		<script type="text/javascript" src="js/fznPlatform.js"></script>
		<script type="text/javascript" src="js/fznLevels.js"></script>
		<script type="text/javascript" src="js/fznSprites.js"></script>
		<script type="text/javascript" src="js/fznBackgrounds.js"></script>
		<script type="text/javascript" src="js/fznWalls.js"></script>
		<script>
			var game,luigi;
			function loadGame(){
				game = new fzn.Game("board");
				game.define("wall",[
					{
						name:"wall"
					},
					{
						name:"hole",
						negative:true
					}]
				)
				game.define("background",[
					{
						name:"ground",
						size: [16,16],
						repeat: "repeat-x",
						source:"img/ground.jpg"
					},
					{
						name:"hills",
						size: [1887,201],
						repeat: false,
						source:"img/hills.png"
					},
					{
						name:"sky",
						size: [2,223],
						repeat: "repeat-x",
						source:"img/sky.png"
					},
					{
						name:"clouds",
						size: [267,113],
						opacity:0.6,
						repeat: false,
						fixed: 0.5,
						source:"img/clouds.png"
					}
				]);
				game.define("sprite",[
					{
						name: "luigi",
						source: "img/luigi-sprites.png",
						type: "user",
						gravity: 0.8,
						collide: {
							block: function(self,pos,item,collision){
								//self = the sprite
								//item = the sprite object that collided
								//collision = a report of collisions
								//pos = array with position where collided
							},
							deadly: function(self){
								self.please("die");
							}
						},
						size:[16,22],
						sprite: {
							R:{
								stand:{ delay:0, steps:[[234,0]]},
								walk:{  delay:5, steps:[[234,0],[263,0]]},
								run:{   delay:3, steps:[[321,0],[348,0]]},
								jump:{  delay:0, steps:[[294,30]]},
								fall:{  delay:0, steps:[[264,30]]}
							},
							L:{
								stand:{ delay:0, steps:[[198,0]]},
								walk:{  delay:5, steps:[[198,0],[169,0]]},
								run:{   delay:3, steps:[[111,0],[84,0]]},
								jump:{  delay:0, steps:[[139,30]]},
								fall:{  delay:0, steps:[[168,30]]}
							},
							dead:{  delay:3, steps:[[0,57],[432,57]]}
						}
					},
					{
						name: "qBlock",
						source: "img/blocks.png",
						type: "block",
						size:[16,16],
						sprite: {
							stand:{ delay:3, steps:[[0,0],[0,0],[0,0],[0,0],[0,0],[51,0],[34,0],[17,0]]}
						}
					},
					{
						name: "eBlock",
						source: "img/blocks.png",
						type: "block",
						size:[16,16],
						sprite: {
							stand:{ delay:0, steps:[[0,17]]}
						}
					},
					{
						name: "block",
						source: "img/blocks.png",
						type: "block",
						size:[16,16],
						sprite: {
							stand:{ delay:0, steps:[[17,17]]}
						}
					},
					{
						name: "spike",
						source: "img/enemies.png",
						type: "deadly",
						collide: {
						//	block:true
						},
						gravity: 0.6,
						size:[18,18],
						sprite: {
							stand:{ delay:5, steps:[[0,77],[19,77]]}
						}
					}
				]);
				game.define("level",{
					name: "level01",
					floor: 285,
					color: "#5088A0",
					size: [600,300],
					sprites:[
						{copyOf: "luigi",  id: "luigi"},
						{copyOf: "spike",  params: {pos:[100,200]}},
						/*
						{copyOf: "spike",  params: {pos:[120,200]}},
						{copyOf: "spike",  params: {pos:[140,200]}},
						{copyOf: "spike",  params: {pos:[160,200]}},
						{copyOf: "spike",  params: {pos:[180,200]}},
						{copyOf: "spike",  params: {pos:[200,200]}},
						{copyOf: "spike",  params: {pos:[220,200]}},
						{copyOf: "spike",  params: {pos:[240,200]}},
						{copyOf: "spike",  params: {pos:[260,200]}},
						{copyOf: "spike",  params: {pos:[280,200]}},
						{copyOf: "spike",  params: {pos:[300,200]}},
						{copyOf: "spike",  params: {pos:[320,200]}},
						{copyOf: "spike",  params: {pos:[340,200]}},
						{copyOf: "spike",  params: {pos:[360,200]}},
						{copyOf: "spike",  params: {pos:[380,200]}},
						{copyOf: "spike",  params: {pos:[400,200]}},
						{copyOf: "spike",  params: {pos:[420,200]}},
						{copyOf: "spike",  params: {pos:[440,200]}},
						{copyOf: "spike",  params: {pos:[460,200]}},
						{copyOf: "spike",  params: {pos:[480,200]}},
						{copyOf: "spike",  params: {pos:[500,200]}},
						{copyOf: "spike",  params: {pos:[520,200]}},
						{copyOf: "spike",  params: {pos:[540,200]}},
						{copyOf: "spike",  params: {pos:[560,200]}},
						*/
						{copyOf: "qBlock", params: {pos:[100,200]}},
						{copyOf: "eBlock", params: {pos:[116,200]}},
						{copyOf: "block",  params: {pos:[132,200]}},
						{copyOf: "block",  params: {pos:[148,200]}},
						{copyOf: "block",  params: {pos:[68,232]}},
						{copyOf: "block",  params: {pos:[200,200]}},
						{copyOf: "block",  params: {pos:[300,200]}},
						{copyOf: "block",  params: {pos:[400,200]}},
						{copyOf: "block",  params: {pos:[500,200]}}
					],
					backgrounds:[
						{copyOf: "sky", id: "mainSky", params: {pos:[0,100]}},
						{copyOf: "clouds", id: "mainClouds", params: {pos:[50,170]}},
						{copyOf: "hills", id: "mainHills", params: {pos:[0,83]}},
						{copyOf: "ground", id: "mainGround", params: {pos:[0,284]}}
					],
					walls:[
						{copyOf: "wall", params: {pos:[116,100],size:[10,100]}}
					]
				});
				game.loadLevel("level01");
			}
		</script>
	</head>
	<body onload="loadGame();">
		<canvas id="board" width="300" height="300"></canvas>
	</body>
</html>
